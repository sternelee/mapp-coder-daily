require("./runtime"),require("./common"),require("./vendors"),(wx.webpackJsonp=wx.webpackJsonp||[]).push([[3],{"10":function(e,t,o){"use strict";o.r(t);var n=o(4),r=o.n(n);for(var a in n)"default"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);t.default=r.a},"27":function(e,t,o){"use strict";o.r(t);var n=o(10);for(var r in n)"default"!==r&&function(e){o.d(t,e,function(){return n[e]})}(r)},"31":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var n=_interopRequireDefault(o(12)),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},a=function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e};function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=o(13),s=_interopRequireDefault(o(0)),u=o(2),c=o(3);function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _asyncToGenerator(e){return function(){var i=e.apply(this,arguments);return new Promise(function(r,a){return function step(e,t){try{var o=i[e](t),n=o.value}catch(e){return void a(e)}if(!o.done)return Promise.resolve(n).then(function(e){step("next",e)},function(e){step("throw",e)});r(n)}("next")})}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}var l,p=(a(Store,[{"key":"setAuth","value":function setAuth(e){this.isAuth=!0,this.auth=e}},{"key":"setList","value":function setList(e,t){this.list=t?[].concat(_toConsumableArray(this.list),_toConsumableArray(e)):e}},{"key":"setPost","value":function setPost(e){var t=e.id,o=this.posts[t]||{};this.posts[t]=r({},o,e)}},{"key":"setTags","value":function setTags(e){this.tags=e}},{"key":"setPubs","value":function setPubs(e){this.pubs=e}},{"key":"setFavs","value":function setFavs(e){this.favs=e}},{"key":"getAuth","value":function getAuth(){var t=this;s.default.getStorage({"key":"auth"}).then(function(e){t.setAuth(e.data),setTimeout(function(){return t.checkUser()},1e3)}).catch(function(){s.default.login().then(function(e){s.default.request({"url":c.AuthUri+"auth?js_code="+e.code+"&type=daily"}).then(function(e){return e.data}).then(function(e){e.openid&&(t.setAuth(e),s.default.setStorageSync("auth",e),setTimeout(function(){return t.checkUser()},1e3))})})})}},{"key":"checkUser","value":function checkUser(){var a=this,e=this.auth.openid;s.default.request({"url":c.Uri+"user/me?uid="+e+"&platform=wechat"}).then(function(e){var t=e.data.data,o=t.tags,n=t.pubs,r=t.favs;a.setTags(o),a.setPubs(n),a.setFavs(r.reverse())})}},{"key":"getFavPosts","value":function getFavPosts(){var o=this;this.favsDone||s.default.request({"url":c.Uri+"post/find?ids="+this.favs}).then(function(e){o.favsDone=!0;var t=e.data.data.map(function(e){return o.setPost(r({},e,{"id":e.pid,"pid":e.id})),e.pid});o.favPids=t})}},{"key":"initSetting","value":(l=_asyncToGenerator(n.default.mark(function _callee(){var t;return n.default.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.getStorageSync("setting");case 2:(t=e.sent)&&(this.setting=t);case 4:case"end":return e.stop()}},_callee,this)})),function initSetting(){return l.apply(this,arguments)})},{"key":"setSetting","value":function setSetting(e,t){var o=Object.assign({},this.setting);o[e]=t,this.setting=o,s.default.setStorage({"key":"setting","data":o})}}]),Store);function Store(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Store),this.auth={"openid":"","session_key":""},this.isAuth=!1,this.list=[],this.posts={},this.tags=[],this.pubs=[],this.favs=[],this.favPids=[],this.favsDone=!1,this.allTags=[],this.allPubs=[],this.page=0,this.more=!1,this.setting={"language":[0,2,2],"theme":0,"order":"creation","show":!1}}(0,i.__decorate)([u.observable],p.prototype,"auth",void 0),(0,i.__decorate)([u.observable],p.prototype,"isAuth",void 0),(0,i.__decorate)([u.observable],p.prototype,"list",void 0),(0,i.__decorate)([u.observable],p.prototype,"posts",void 0),(0,i.__decorate)([u.observable],p.prototype,"tags",void 0),(0,i.__decorate)([u.observable],p.prototype,"pubs",void 0),(0,i.__decorate)([u.observable],p.prototype,"favs",void 0),(0,i.__decorate)([u.observable],p.prototype,"favPids",void 0),(0,i.__decorate)([u.observable],p.prototype,"favsDone",void 0),(0,i.__decorate)([u.observable],p.prototype,"allTags",void 0),(0,i.__decorate)([u.observable],p.prototype,"allPubs",void 0),(0,i.__decorate)([u.observable],p.prototype,"page",void 0),(0,i.__decorate)([u.observable],p.prototype,"more",void 0),(0,i.__decorate)([u.observable],p.prototype,"setting",void 0),(0,i.__decorate)([u.action],p.prototype,"setAuth",null),(0,i.__decorate)([u.action],p.prototype,"setList",null),(0,i.__decorate)([u.action],p.prototype,"setPost",null),(0,i.__decorate)([u.action],p.prototype,"setTags",null),(0,i.__decorate)([u.action],p.prototype,"setPubs",null),(0,i.__decorate)([u.action],p.prototype,"setFavs",null),(0,i.__decorate)([u.action],p.prototype,"getAuth",null),(0,i.__decorate)([u.action],p.prototype,"checkUser",null),(0,i.__decorate)([u.action],p.prototype,"getFavPosts",null),(0,i.__decorate)([u.action],p.prototype,"initSetting",null),(0,i.__decorate)([u.action],p.prototype,"setSetting",null),t.default=new p},"35":function(e,t,o){},"4":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var n=function(e,t,o){return t&&defineProperties(e.prototype,t),o&&defineProperties(e,o),e};function defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=o(0),a=_interopRequireDefault(r),i=o(11),s=_interopRequireDefault(o(31));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}o(35);var u={"indexStore":s.default};(0,i.setStore)(u);var c=(function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(_App,r.Component),n(_App,[{"key":"componentDidMount","value":function componentDidMount(){}},{"key":"componentDidShow","value":function componentDidShow(){}},{"key":"componentDidHide","value":function componentDidHide(){}},{"key":"componentDidCatchError","value":function componentDidCatchError(){}},{"key":"_createData","value":function _createData(){}}]),_App);function _App(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_App);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(_App.__proto__||Object.getPrototypeOf(_App)).apply(this,arguments));return e.config={"pages":["pages/index/index","pages/post/index"],"window":{"backgroundTextStyle":"light","navigationBarBackgroundColor":"#fff","navigationBarTitleText":"WeChat","navigationBarTextStyle":"black"}},e}t.default=c,App(o(0).default.createApp(c)),a.default.initPxTransform({"designWidth":750,"deviceRatio":{"640":1.17,"750":1,"828":.905}})}},[[27,0,1,2]]]);