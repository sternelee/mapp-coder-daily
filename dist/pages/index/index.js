(wx.webpackJsonp=wx.webpackJsonp||[]).push([[8],[,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{"value":!0});var C=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,e){var n=[],o=!0,a=!1,r=void 0;try{for(var i,u=t[Symbol.iterator]();!(o=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);o=!0);}catch(t){a=!0,r=t}finally{try{!o&&u.return&&u.return()}finally{if(a)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(t,e,n){return e&&defineProperties(t.prototype,e),n&&defineProperties(t,n),t};function defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var a,r,I=n(0),i=function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}(I),u=n(11),s=n(21);function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}n(22);var c=(function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Index,I.Component),o(Index,[{"key":"_constructor","value":function _constructor(){(function get(t,e,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:get(a,e,n)}if("value"in o)return o.value;var r=o.get;return void 0!==r?r.call(n):void 0})(Index.prototype.__proto__||Object.getPrototypeOf(Index.prototype),"_constructor",this).apply(this,arguments),this.state={"top":0,"topics":[],"populars":[],"posts":[],"show":!0,"pub":"","keyword":""},this.$$refs=new i.default.RefsArray}},{"key":"onShareAppMessage","value":function onShareAppMessage(t){return"button"===t.from&&console.log(t.target),{"title":"程序猿日报","path":"pages/index/index","success":function success(t){console.log("转发成功:"+JSON.stringify(t))},"fail":function fail(t){console.log("转发失败:"+JSON.stringify(t))}}}},{"key":"componentWillMount","value":function componentWillMount(){var t=i.default.getMenuButtonBoundingClientRect();this.setState({"top":t.top+2})}},{"key":"componentWillReact","value":function componentWillReact(){console.log("componentWillReact")}},{"key":"componentDidMount","value":function componentDidMount(){this.getTopics(),this.getPopular()}},{"key":"componentWillUnmount","value":function componentWillUnmount(){}},{"key":"componentDidShow","value":function componentDidShow(){this.getPost()}},{"key":"componentDidHide","value":function componentDidHide(){}},{"key":"_createData","value":function _createData(t,e,n){var o=this;this.__state=t||this.state||{},this.__props=e||this.props||{};var a=this.$prefix,r=(0,I.genCompid)(a+"$compid__5"),i=C(r,2),u=i[0],s=i[1],c=(0,I.genCompid)(a+"$compid__6"),l=C(c,2),p=l[0],f=l[1],d=(0,I.genCompid)(a+"$compid__7"),m=C(d,2),y=m[0],g=m[1],_=this.__state,h=_.top,v=_.topics,b=_.posts,w=(_.populars,_.show),S=_.pub,$=_.keyword,x=S?v.filter(function(t){return t.id===S})[0]:{"image":"","name":""},P=$?v.filter(function(t){return-1<t.name.toLowerCase().indexOf($)}):v,k=(0,I.internal_inline_style)({"color":"#1c1e21","padding":h+"px 0 0 10px","height":"35px"});this.anonymousFunc0=function(){return o.setState({"show":!1})},this.anonymousFunc1=function(){return o.setState({"show":!0})};var O=(0,I.internal_inline_style)({"transform":"translateX("+(w?"-50%":"0")+")"}),D=b.map(function(n,t){return n={"$original":(0,I.internal_get_original)(n)},{"$loopState__temp4":new Date(n.$original.createdAt).toLocaleDateString(),"$anonymousCallee__1":n.$original.tags.map(function(t,e){return t={"$original":(0,I.internal_get_original)(t)},{"$loopState__temp6":n.$original.id+e,"$original":t.$original}}),"$original":n.$original}});return I.propsManager.set({"name":"gengduo","size":50,"color":"#000"},s,u),I.propsManager.set({"name":"caidan","size":60,"color":"#000"},f,p),w||I.propsManager.set({"name":"sousuo","size":40,"color":"#000"},g,y),Object.assign(this.__state,{"anonymousState__temp":k,"anonymousState__temp2":O,"loopArray3":D,"$compid__5":s,"$compid__6":f,"$compid__7":g,"tags":P,"theTopic":x}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(){}},{"key":"anonymousFunc1","value":function anonymousFunc1(){}}]),r=a=Index,a.$$events=["anonymousFunc0","anonymousFunc1","onSearch","onTopic","onPost"],a.$$componentPath="pages/index/index",r);function Index(){var t,e,o;!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Index);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=o=_possibleConstructorReturn(this,(t=Index.__proto__||Object.getPrototypeOf(Index)).call.apply(t,[this].concat(a)))).$usedState=["anonymousState__temp","anonymousState__temp2","loopArray3","$compid__5","$compid__6","$compid__7","show","keyword","tags","pub","theTopic","posts","top","topics","populars"],o.config={"navigationBarTitleText":"程序猿日常","navigationStyle":"custom"},o.getTopics=function(){i.default.request({"url":u.Uri+"v1/publications"}).then(function(t){o.setState({"topics":t.data})})},o.getPopular=function(){i.default.request({"url":u.Uri+"v1/tags/popular"}).then(function(t){var e=t.data.map(function(t){return t.name});o.setState({"populars":e})})},o.getPost=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=n?'"pub":"'+n+'"':'"sortBy":"popularity"',e="query "+(n?"fetchPostsByPublication":"fetchLatest")+"($params: "+(n?"PostByPublicationInput":"QueryPostInput")+") { "+(n?"postsByPublication":"latest")+"(params: $params) { id,title,url,publishedAt,createdAt,image,ratio,placeholder,views,readTime,publication { id, name, image },tags,bookmarked,read } }";i.default.request({"url":u.Uri+"graphql","data":{"query":e,"variables":'{"params":{"latest":"'+(new Date).toISOString()+'","page":0,"pageSize":30,'+t+"}}"}}).then(function(t){var e=t.data.data;o.setState({"show":!0,"posts":n?e.postsByPublication:e.latest})})},o.onTopic=function(t){o.setState({"pub":t,"keyword":""}),o.getPost(t)},o.onPost=function(t){console.log(t),(0,s.setGlobalData)("pid",t),i.default.navigateTo({"url":"/pages/post/index?&id="+t})},o.onSearch=function(t){o.setState({"keyword":t.detail.value.toLowerCase()})},o.customComponents=["IconFont"],_possibleConstructorReturn(o,e)}e.default=c,Component(n(0).default.createComponent(c,!0))},,,,,function(t,e,n){"use strict";n.r(e);var o=n(2),a=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,function(){return o[t]})}(r);e.default=a.a},,,function(t,e,n){t.exports=n.p+"pages/index/index.wxml"},,,,,,,,,function(t,e,n){"use strict";n.r(e);n(20);var o=n(7);for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a)},function(t,e,n){"use strict";n(10)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{"value":!0}),e.setGlobalData=function setGlobalData(t,e){o[t]=e},e.getGlobalData=function getGlobalData(t){return o[t]};var o={}},function(t,e,n){}],[[19,0,1,2]]]);